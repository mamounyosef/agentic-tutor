# ==============================================================================
# AGENTIC TUTOR - Environment Configuration
# ==============================================================================

# Project Settings
APP_NAME=agentic_tutor
APP_ENV=development
DEBUG=true

# ==============================================================================
# DATABASE - MySQL (Separate for Constructor and Tutor workflows)
# ==============================================================================

# Constructor Database (Course Creators)
CONSTRUCTOR_DB_URL=mysql+pymysql://user:password@localhost:3306/agentic_tutor_constructor

# Tutor Database (Students)
TUTOR_DB_URL=mysql+pymysql://user:password@localhost:3306/agentic_tutor_tutor

# Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ==============================================================================
# Z.AI API - OpenAI Compatible
# Documentation: https://api.z.ai/guides/develop/openai/python
# ==============================================================================

# LLM for Chat
LLM_BASE_URL=https://api.z.ai/api/paas/v4/
LLM_API_KEY=your-zai-api-key-here
LLM_MODEL=glm-4.7
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=4096

# Embeddings
EMBEDDINGS_BASE_URL=https://api.z.ai/api/paas/v4/
EMBEDDINGS_API_KEY=your-zai-api-key-here
EMBEDDINGS_MODEL=embedding-model
EMBEDDINGS_DIMENSIONS=1536

# ==============================================================================
# VECTOR DATABASE - ChromaDB
# ==============================================================================

# Constructor Vector DB (Per Course)
CONSTRUCTOR_VECTOR_DB_PATH=./data/vector_db/constructor
CONSTRUCTOR_CHROMA_PERSIST_DIR=./data/vector_db/constructor/persistent

# Student Vector DBs (Per Student, Per Course)
STUDENT_VECTOR_DB_PATH=./data/vector_db/students

# Course Vector DBs (Read-Only for Students)
COURSE_VECTOR_DB_PATH=./data/vector_db/courses

# ChromaDB Settings
CHROMA_COLLECTION_CHUNK_SIZE=1000
CHROMA_COLLECTION_OVERLAP=200

# ==============================================================================
# LANGGRAPH CHECKPOINTERS (Conversation Memory)
# ==============================================================================

# Constructor Checkpointer
CONSTRUCTOR_CHECKPOINT_PATH=./checkpoints/constructor

# Tutor Checkpointer
TUTOR_CHECKPOINT_PATH=./checkpoints/tutor

# ==============================================================================
# JWT SECURITY
# ==============================================================================

SECRET_KEY=your-secret-key-generate-with-openssl-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_MINUTES=60

# ==============================================================================
# CORS
# ==============================================================================

CORS_ORIGINS=http://localhost:3000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_HEADERS=["*"]

# ==============================================================================
# FILE STORAGE
# ==============================================================================

# Upload directories
UPLOAD_DIR=./uploads/materials
MAX_UPLOAD_SIZE=10485760  # 10MB
ALLOWED_EXTENSIONS=.pdf,.ppt,.pptx,.doc,.docx,.txt

# ==============================================================================
# LOGGING
# ==============================================================================

LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=logs/app.log
LOG_ROTATION=midnight
LOG_RETENTION=7

# ==============================================================================
# COURSE SETTINGS
# ==============================================================================

# Default difficulty for new courses
DEFAULT_DIFFICULTY=beginner

# Session settings
DEFAULT_SESSION_LENGTH=30  # minutes
SESSION_MIN_LENGTH=10
SESSION_MAX_LENGTH=60

# Mastery settings
MASTERY_MIN_SCORE=0.7  # Topic mastery threshold
SPACED_REPETITION_DAYS=7  # Days before review needed

# Quiz settings
_QUIZ_QUESTIONS_PER_TOPIC=3
_QUIZ_PASSING_SCORE=0.6

# ==============================================================================
# RATE LIMITING
# ==============================================================================

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
